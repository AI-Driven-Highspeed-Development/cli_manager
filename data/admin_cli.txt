#!/usr/bin/env python3
"""Admin CLI - Generated by cli_manager.

This file is copied from managers/cli_manager/data/admin_cli.txt.
It uses CLIManager to build and dispatch commands registered by modules.

Usage:
    python admin_cli.py <module> <command> [args...]
    python admin_cli.py <module_short_name> <command> [args...]

Examples:
    python admin_cli.py secret_manager list
    python admin_cli.py sm list  # if 'sm' is registered as short_name
"""

import sys
import os

# Add project root to path
project_root = os.path.dirname(os.path.abspath(__file__))
if project_root not in sys.path:
    sys.path.insert(0, project_root)

from managers.cli_manager import CLIManager


def main() -> int:
    cli = CLIManager()
    parser = cli.build_parser(
        prog=os.path.basename(__file__),
        description="Project Admin CLI - Unified command interface",
    )

    if len(sys.argv) == 1:
        parser.print_help()
        return 0

    args = parser.parse_args()

    if not args.module:
        parser.print_help()
        return 0

    # Get the module subparser and print help if no command
    if not hasattr(args, "command") or not args.command:
        # Re-parse to get module-specific help
        parser.parse_args([args.module, "--help"])
        return 0

    return cli.dispatch(args)


if __name__ == "__main__":
    sys.exit(main())
